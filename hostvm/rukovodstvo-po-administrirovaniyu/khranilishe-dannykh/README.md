# Хранилище данных

Хранилище данных (домен хранения) является репозиторием для дисков ВМ, шаблонов и установочных ISO образов.

Виртуализация HOSTVM имеет три типа доменов хранения:

* домен данных (data domain) – хранит диски ВМ, а также шаблоны. Диски могут содержать ОС ВМ или другие данные. Каждый дата-центр должен иметь один или несколько подключенных доменов данных. Домен данных может быть подключен только к одному дата-центру;
* домен ISO – хранит файлы ISO для установки на ВМ ОС или дополнительных приложений, таких как гостевые агенты и драйверы Windows. Каждый дата-центр может иметь один подключенный домен ISO или не иметь подключенных доменов вообще. Один и тот же домен ISO может использоваться несколькими дата-центрами;
* домен экспорта (export domain) – используется в качестве хранилища для перемещения ВМ между разными средами виртуализации HOSTVM. Для экспорта/импорта также возможно использование доменов хранения данных.

Домены данных могут быть созданы на любом из поддерживаемых файловых (NAS – NFS, GlusterFS или другие POSIX-совместимые ФС) или блочных (SAN – iSCSI или FCP) типов устройств, а также в локальном хранилище хоста виртуализации. Домен ISO и домен экспорта могут располагаться только на файловых типах хранилищ.

На файловых типах хранилищ все виртуальные диски, шаблоны и снапшоты хранятся в виде файлов. Для блочных хранилищ, таких как iSCSI или FCP, HOSTVM использует Logical Volume Management (LVM). Само хранилище создается как volume группа (vg), а диски, шаблоны и снапшоты как логические тома (lv).

Настройка хранилища является необходимым условием для нового дата-центра, потому что он не может быть инициализирован, пока не подключены и не активированы домены хранения.

Для добавления доменов хранения требуется доступ к порталу администрирования и наличие хотя бы одного подключенного хоста в статусе Up.

Виртуальные диски имеют два формата – QCOW2 или raw. Тип диска может быть sparse («тонкий») или preallocated («толстый»). Снапшоты всегда имеют тип sparse, но могут сниматься с дисков обоих типов.
