# Изоляция хостов для обеспечения целостности ВМ

ВМ не должна иметь возможности запуска на двух хостах одновременно, чтобы избежать повреждения данных на диске и других возможных проблем. Чтобы не допустить такой запуск, в HOSTVM предусмотрен механизм изоляции хостов в статусе non-responsive, с использованием внешнего управления питанием для отключения хоста и его ВМ. Только после этого ВМ могут быть запущены на другом хосте. Хост переходит в статус non-responsive, когда менеджер виртуализации теряет возможность коммуникации с ним. HOSTVM Manager использует механизм изоляции для того, чтобы убедиться, что высокодоступные ВМ, которые были запущены на хосте, точно выключены, и затем перезапускает их на другом хосте кластера.

Еще одним механизмом, позволяющим избежать одновременного запуска двух экземпляров ВМ на разных хостах, является использование специального раздела для ВМ (VM lease), позволяющего контролировать запуск машины на других хостах кластера в случае отказа текущего.

Важно: следует отличать хосты в статусе Non-Operational и Non-Responsive. Хост в статусе non-operational имеет ошибки, но продолжает взаимодействовать с менеджером виртуализации. HOSTVM Manager выполняет миграцию машин с такого хоста на другие хосты кластера, также, как это происходит при переводе в режим обслуживания. Хост в статусе non-responsive не имеет связи с HOSTVM Manager. Если связь не восстанавливается в течение около 30 секунд, то менеджер виртуализации изолирует такой хост и перезапускает высокодоступные ВМ на других хостах кластера.
