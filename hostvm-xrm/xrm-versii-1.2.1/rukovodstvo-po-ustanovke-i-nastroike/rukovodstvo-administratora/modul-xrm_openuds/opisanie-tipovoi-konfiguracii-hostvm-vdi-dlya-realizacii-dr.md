# Описание типовой конфигурации HOSTVM VDI для реализации DR

Для реализации аварийно-устойчивой инфраструктуры потребуется две независимые инсталляции HOSTVM VDI на разных серверах в одном или нескольких ЦОД.&#x20;

Каждая инсталляция VDI обладает своим собственным набором управляющими компонентов (брокеров), которые предоставляют пользователю требуемые ресурсы. В пределах каждой инсталляции обеспечивается непрерывная работа инфраструктуры VDI за счет дублирования компонентов в высокодоступной конфигурации. При этом дублирование компонентов внутри каждой инсталляции носит рекомендательный характер и может не использоваться, в зависимости от целевой конфигурации проекта.\


Требования к репликации виртуальных машин с пользовательскими сервисами и терминальными ресурсами между площадками:

{% hint style="danger" %}
**Модуль xrm\_OpenUDS не работает с хранилищами, репликация не заложена в логику работы модуля и выполняется сторонними средствами: аппаратным или программным обеспечением.**
{% endhint %}

* Между двумя инсталляциями должна быть обеспечена репликация пользовательских виртуальных машин программными средствами серверной виртуализации или аппаратными средствами используемой системы хранения данных. HOSTVM VDI может быть развернут на основе гипервизора HOSTVM или любой другой совместимой серверной виртуализации.
* Для автоматизации аварийного восстановления ресурсов может использоваться репликация хранилищ виртуальных машин или задействованы независимые терминальные фермы на каждой площадке.
* Использование аппаратной репликации средствами системы хранения данных как правило позволяет обеспечить синхронную или асинхронную репликацию виртуальных машин, репликация программными средствами платформы виртуализации - только асинхронную.
* При использовании серверной виртуализации HOSTVM поддерживается только аппаратная репликация хранилищ виртуальных машин средствами системы хранения данных
* При использовании иной совместимой серверной виртуализации (на основе oVirt, OpenStack, OpenNebula, Proxmox) возможность программной репликации виртуальных машин необходимо уточнять у производителя соответствующей серверной виртуализации.

{% hint style="danger" %}
Для модуля xrm\_OpenUDS версии 1.2.1 добавлена поддержка исключительно базовых сервисов типа Static Multiple IP, oVirt Fixed и oVirt Linked
{% endhint %}

| Компонент                                          | Основная инсталляция/площадка                                                                            | Резервная инсталляция/площадка                                                                           |
| -------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| Балансировщик                                      | 1 или 2 балансировщика  в режиме HA                                                                      | 1 или 2 балансировщика в режиме HA                                                                       |
| Брокер                                             | 1 или 2 брокера в режиме HA                                                                              | 1 или 2 брокера в режиме HA                                                                              |
| Сервер базы данных VDI                             | <p>1 или 2 узла БД в режиме Active/Passive </p><p>или Active/Active (при использовании Postgres Pro)</p> | <p>1 или 2 узла БД в режиме Active/Passive </p><p>или Active/Active (при использовании Postgres Pro)</p> |
| Шлюз доступа (тунеллер)                            | 1 или 2 тунеллера                                                                                        | 1 или 2 тунеллера                                                                                        |
| Сервер автоматизации аварийного восстановления XRM | 1 управляющий узел                                                                                       | 1 управляющий узел                                                                                       |

\
