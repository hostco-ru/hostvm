# Создание локального хранилища

На Hostvm Node локальное хранилище всегда должно быть определено на файловой системе, которая отдельна от `/` (корня).﻿ Используйте отдельный логический том или диск, чтобы избежать возможной потери данных во время обновлений.

### Процедура без создания lvm

1. На хосте создайте каталог для локального хранилища:

```
# mkdir -p /data/images
```

2. Убедитесь, что каталог имеет права, позволяющие пользователю **vdsm** (UID 36) и группе **kvm** (GID 36) читать и записывать:

```
# chown 36:36 /data /data/images
```

```
# chmod 0755 /data /data/images
```

### Процедура c созданием lvm

1. Создайте логический том нужного размера:

```
# lvcreate -L $SIZE hn -n data
```

2. Отформатируйте его в файловую систему ext4:

```
# mkfs.ext4 /dev/mapper/hn-data
```

3. Добавьте в /etc/fstab﻿ и примонтируйте:

```
# echo "/dev/mapper/hn-data /data ext4 defaults,discard 1 2" >> /etc/fstab 
```

```
# mount -a
```

4. Установите права доступа для каталога:

```
# chown 36:36 /data /hn-data
```

```
# chmod 0755 /data /hn-data
```
