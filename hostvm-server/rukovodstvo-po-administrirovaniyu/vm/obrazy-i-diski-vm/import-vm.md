# Импорт ВМ

Последняя версия HOSTVM позволяет использовать портал администрирования или API для прямого импорта образов дисков ВМ в формате QCOW2 в домен данных. Импортированные в домен данных образы можно подключить к существующим ВМ. Для работы импорта необходимо при установке HOSTVM Manager активировать функцию Image I/O Proxy. Вы должны импортировать CA-сертификат из HOSTVM Manager в ваш браузер и установить его как доверенный для веб-сайтов. Также ваш браузер должен поддерживать определенные API HTML5. Известно, что работают Internet Explorer 10, Firefox 35 и Chrome 13 или более поздние версии. Чтобы импортировать образ ВМ с помощью портала администрирования:

1. Выберите вкладку Storage > Disks. На этой вкладке выберите Upload → Start;
2. Отобразится новое окно с заголовком Upload Image. В окне нажмите Choose File и выберите образ, который вы хотите загрузить из локального расположения. Укажите размер образа, алиас для его имени, а также дата-центр и домен хранения, в котором он будет храниться. Нажмите OK, чтобы начать импорт;
3. Образ отобразится в списке на вкладке Disks. Ниже можно увидеть строку состояния загрузки. Когда HOSTVM Manager завершит загрузку образа, статус изменится на OK. Обратите внимание, что в этот момент он еще не прикреплен ни к одной ВМ.

Чтобы прикрепить образ диска к существующей ВМ с помощью портала администрирования:

1. Выберите вкладку Compute > Virtual Machines и щелкните по имени ВМ, к которой вы хотите прикрепить образ;
2. Выберите вкладку Disks для этой ВМ в нижней части интерфейса. Здесь отображен список всех образов дисков, подключенных к ВМ;
3. Если к ВМ уже подключены диски, которые вы хотите удалить, нажмите Remove. Откроется окно с запросом подтверждения действия. Если вы хотите полностью удалить диск из домена данных, отметьте параметр Remove permanently;
4. Чтобы добавить импортированный образ диска, нажмите кнопку Attach. Откроется окно со списком всех образов дисков. Установите флажок рядом с образом диска, который вы хотите прикрепить. Выберите его интерфейс, чтобы использовать нужный протокол подключения. Наконец, если это загрузочный диск для системы, установите флажок Bootable. Нажмите OK, чтобы присоединить диск к ВМ.

Если у вас есть ВМ, сохраненная как Open Virtual Appliance (OVA) файл, вы можете импортировать ее в домен хранения. Образы дисков, хранящиеся в OVA файле, должны быть в формате RAW или QCOW2. Для импорта ВМ используйте следующую процедуру:

1. Перейдите в раздел Compute > Virtual Machines;
2. Нажмите кнопку дополнительных действий, затем Import;
3. В поле Source выберите Virtual Appliance (OVA);
4. В поле Host выберите хост, с которого будет импортирована машина;
5. В поле File Path укажите абсолютный путь к директориии с OVA-файлом;
6. Нажмите Load, чтобы загрузить список OVA, доступных для импорта из этой директории;
7. Выберите ВМ в списке Virtual Machines on Source и с помощью стрелок переместите ее в список Virtual Machines to Import;
8. Нажмите Next;
9. В поле Storage Domain укажите домен хранения для ВМ;
10. В поле Allocation Policy выберите типа диска (thin или preallocated);
11. Выберите ВМ и на вкладках General, Network Interfaces, Disks ознакомьтесь с конфигурацией импортируемой машины. Обратите внимание на возможность редактирования параметров при импорте;
12. Нажмите OK, чтобы импортировать ВМ.

Статус импорта можно отслеживать в меню Tasks портала администрирования. После завершения ВМ появится в списке в разделе Compute > Virtual Machines.
