# Пакетная установка брокера для ALT Linux

Данная статья написана для ALT Linux версии 10.02 и выше

## Подготовка системы

Перед установкой необходимо проверить наличие записи сервера DNS в файле /etc/resolv.conf, при отсутствии  следует добавить.

Необходимо обновить индексы пакетов в системе:

```
sudo apt-get update
```

Далее необходимо обновить систему:

```
sudo apt-get dist-upgrade
```

## Установка rpm пакета <a href="#user-content-ustanovka-rpm-paketa" id="user-content-ustanovka-rpm-paketa"></a>

Скачать и установить пакет из личного кабинета:

```
sudo apt-get install ./hostvm-vdi-3.6-alt3.x86_64.rpm
```

При использовании Альт Сервер 10.2 и выше необходимо выполнить установку пакета:

```
sudo pip3 install paramiko
```

Перед запуском инициализации брокера, необходимо остановить службу apache2, если она используется:

```
sudo systemctl disable --now httpd2
```

Для версии 3.6-alt3 и свежее шаг запуска postinst.sh не выполняется:\
Запустить скрипт для установки необходимых зависимостей и настройки системы:

```
sudo /usr/share/hostvm/postinst.sh
```

Запустить скрипт для инициализации брокера:

```
sudo /usr/share/hostvm/broker-init.sh
```

Проследовать инструкциям установочного скрипта. На этом этапе установка брокера завершена, чтобы попасть в веб-интерфейс управления брокера, необходимо перейти в браузере по ip-адресу сервера, на котором производилась установка пакета

Для доступа в учётную запись администратора на портале используйте следующие данные:

Login: _root_\
Password: _udsmam0_
