# Настройка брокера VDI для использования выделенного сервера БД

### Версия 3.6-20250704 и выше <a href="#id-3.6" id="id-3.6"></a>

Для настройки подключения к БД используйте [мастер установки HOSTVM VDI](../hostvm-vdi-ova-install/#setup-wizard).

### Версия 3.5 и 3.6 до номера сборки 20250704 <a href="#id-3.5" id="id-3.5"></a>

В консоли брокера VDI выполните команду `hostvm-vdi-setup` для запуски мастера установки.

Подтвердите настройку внешнего сервера БД:

```console
# Настроить брокер на использование внешнего сервера базы данных? [Y/n]: y
```

Ответьте на вопросы мастера, указав тип используемой СУБД, адрес и порт сервера БД, имя базы данных, имя и пароль пользователя для подключения.

Пример конфигурации:

```console
# Укажите IP адрес сервера БД: 10.1.1.2
# Укажите порт сервера БД [3306]: 
# Укажите имя базы данных [udsdb]: 
# Укажите пользователя для подключения к серверу БД [udsdbadm]: 
# Введите пароль пользователя: 
```

### Версия 3.0 <a href="#id-3.0" id="id-3.0"></a>

Внесите изменения в файл `/var/server/server/settings.py`:

```
DATABASES = {
...
    'NAME': 'udsdb',
    'USER': 'udsdbadm',
    'PASSWORD': 'password',
    'HOST': '10.1.1.1',
    'PORT': '3306',
```

`udsdb` - имя БД, аналогично созданной новой базе на сервере БД

`udsdbadm` - имя пользователя, аналогично созданному на сервере БД

`password` - пароль, аналогично заданному на сервере БД

`10.1.1.1` - IP адрес сервера БД

Запустите сервисы брокера:

```bash
systemctl start apache2 uds
```
