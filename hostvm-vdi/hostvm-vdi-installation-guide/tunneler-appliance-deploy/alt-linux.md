# Установка на ALT Linux

## Системные требования <a href="#requirements" id="requirements"></a>

* Операционная система "Альт Сервер" версии 10.х, профиль установки "Минимальная установка".

## Подготовка системы <a href="#preparation" id="preparation"></a>

Все команды необходимо выполнять используя пользователя root, в учётную запись которого необходимо _**переключиться**_ командой:

```
su -
```

&#x20;Обновите индексы пакетов и систему:

```shell-session
# apt-get update && apt-get dist-upgrade
```

## **Установка и настройка** <a href="#install" id="install"></a>

Скачайте из личного кабинета и установите пакет:

```shell-session
# apt-get install ./hostvm-gw-<version>.rpm
```

{% hint style="info" %}
При установке версии 3.6-alt2 и ниже запустите скрипт для установки необходимых зависимостей и настройки системы:

```shell-session
# sh /usr/share/hostvm/setup/postinst.sh
```

Начиная с версии 3.6-3 данный шаг не требуется.
{% endhint %}

### Сертификаты <a href="#certificates" id="certificates"></a>

Для подключения к брокеру HOSTVM VDI по протоколу HTTPS требуется наличие установленного действительного сертификата на ВМ брокера. При необходимости, перед запуском мастера установки добавьте CA сертификат в доверенные.

Для этого скопируйте его на машину HOSTVM VDI туннелера и поместите в директорию:

```
/etc/pki/ca-trust/source/anchors/
```

Затем выполните команду:

```shell-session
# update-ca-trust
```

### Мастер установки <a href="#setup-wizard" id="setup-wizard"></a>

**Версия 3.6-5 и выше**

Выполните команду `hostvm-vdi setup` для запуски мастера установки.

В процессе установки будет сгенерирован самоподписанный сертификат для туннелера. Вы можете заменить его на собственный: [Сертификат для HTML5 подключений](../tunneler-appliance-deploy.md#html5-certificate). При наличии сертификата в системе (например при настройке существующей инсталляции) вы сможете сохранить старый сертификат либо сгенерировать новый.

**Версия 3.6-4 и ниже**

Выполните команду `hostvm-setup` для запуска мастера установки.

Задайте запрашиваемые мастером параметры конфигурации:

* FQDN брокера HOSTVM VDI;
* Тип соединения с брокером: https;
* Учетная запись с правами администратора на брокере (аутентификатор, логин, пароль). Для использования встроенной учетной записи администратора оставьте значение аутентификатора пустым, нажав Enter.

## Портал пользователя <a href="#user-portal" id="user-portal"></a>

> Данный функционал доступен начиная с версии 3.6

По умолчанию при установке HOSTVM VDI Tunneler портал пользователя не доступен.

Скачайте из личного кабинета пакет `hostvm-vdi-broker-gui` для ALT Linux, установите его:

```shell-session
# apt-get install ./hostvm-vdi-broker-gui-3.6-alt2.x86_64.rpm
```

Для активации портала запустите мастер настройки, выполнив команду `hostvm-vdi-gui-setup`

Задайте запрашиваемые мастером параметры конфигурации:

* IP адрес или FQDN брокера HOSTVM VDI

**Пример конфигурации:**

```shell-session
# hostvm-vdi-gui-setup 
** Добро пожаловать в мастер настройки HOSTVM VDI Broker Web UI. Пожалуйста, заполните все поля корректными значениями. Для принятия значений по умолчанию нажимайте ENTER.

** Введите IP адрес или FQDN брокера HOSTVM VDI []: hostvm-vdi36
** Перезаписать конфигурацию? [Y/n]: y
** Конфигурация обновлена, задан адрес брокера: hostvm-vdi36
** Настройка завершена.
```

После завершения настройки портал будет доступен по адресу `https://<IP или FQDN туннелера>:1443/`

Для настройки SSL сертификатов портала воспользуйтесь соответствующим разделом руководства по установке брокера HOSTVM VDI:

[Настройка SSL сертификатов](../hostvm-vdi-ova-install/#ssl-certificates)

