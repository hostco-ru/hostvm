# Настройка транспорта подключения

Для подключения к виртуальным рабочим столам и приложениям необходимо создать транспорт подключения.

Транспорт – это небольшие приложения, которые отвечают за предоставление доступа к развернутому сервису и запускаются на клиенте.

В зависимости от типа настроенного виртуального рабочего стола, места расположения и способа подключения к виртуальным рабочим столам, должны быть созданы различные типы транспортов.

На клиенте и ВМ должны быть установлены необходимые протоколы соединения, которые будут использоваться в разделе транспорта.

Прямое подключение (транспорт) используется для доступа пользователей к виртуальным рабочим столам и приложениям из внутренней локальной сети, VPN, LAN Extension и т. д.

![](../../.gitbook/assets/vdi\_ag25.png)

Туннелированное подключение (транспорт) используется для доступа пользователей к виртуальным рабочим столам и приложениям из глобальной сети. Эти транспорты будут устанавливать соединение через HOSTVM VDI туннелер.

![](../../.gitbook/assets/vdi\_ag26.png)

Транспорт HTML5 может использоваться для доступа пользователей к виртуальным рабочим столам с помощью всех типов доступа (LAN, WAN и т.д.). Этот транспорт использует сервер туннелирования для соединения с виртуальными рабочими столами.

Для создания транспортов необходимо нажать «New» в разделе «Connectivity» -> «Current Transports».

Примечания:

* если вам нужен доступ из сети, которая не является вашей локальной сетью, вам придется использовать туннелированные транспорты, которые должны иметь общедоступный IP-адрес сервера HOSTVM VDI Tunneler;
* HOSTVM VDI Tunneler будет использовать 2 порта в зависимости от предоставляемой услуги. При соединении через HTML5 будет использоваться порт 10443, при любом туннелированном соединении (RDP, RDS, X2Go и т. Д.) будет использоваться порт 443.

### Прямой транспорт SPICE

Прямой транспорт SPICE обеспечивает доступ к виртуальным рабочим столам пользователей Windows / Linux через протокол SPICE. Для этого клиентам необходимо установить SPICE-соединение (Virt-Manager).

Транспорт SPICE можно использовать только с сервис-провайдерами HOSTVM (oVirt) или Red Hat Enterprise Virtualization (RHEV) и OpenNebula.

Минимальные параметры, которые необходимо настроить для прямого транспорта SPICE:

**Основные параметры:**

* имя (Name) – имя транспорта;
* приоритет (Priority) – чем ниже значение параметра, тем выше транспорт будет отображаться в списке доступных сервисов. Транспорт с наименьшим значением параметра будет использоваться по умолчанию при нажатии на изображение сервиса;
* сертификат (Certificate) – сертификат, сгенерированный в HOSTVM Manager, необходим для подключения к виртуальным рабочим столам (обычно размещается в /etc/pki/ovirt-engine/certs/ca.der);
* доступ к сетям (Networks Access) – указывается, если в выбранной сети в параметре «Networks» предоставляется доступ пользователям с помощью этого транспорта (доступные сети будут настроены в параметре «Networks»);
* сети (Networks) – сетевые диапазоны, подсети или IP-адреса, перечисленные в разделе «Current Networks» -> «Connectivity». Этот параметр используется вместе с параметром «Network Access», чтобы включить или отключить доступ пользователя к сервису на основе сетевого местоположения;

![](../../.gitbook/assets/vdi\_ag29.png)

**Дополнительные параметры:** показать полноэкранный режим (Show fullscreen) – включение/отключение полноэкранного режима для удаленного рабочего стола.



![30](../../.gitbook/assets/vdi\_ag30.png)

### Транспорт SPICE Tunnel

При настройке транспорта SPICE Tunnel в панели управления HOSTVM VDI в качестве tunnel server указывается \<tunneler\_hostname>:, где:

* \<tunneler\_hostname> - FQDN или IP адрес машины HOSTVM Tunneler;
* \<port> - порт подключения, по умолчанию - 443.
